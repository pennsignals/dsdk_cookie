name: test

on:
  push:
  schedule:
  - cron: "0 0 * * *"

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.9"]

    steps:
    - name: checkout
      uses: actions/checkout@v3

    - name: setup_python${{ matrix.python-version }}
      uses: actions/setup-python@v3
      with:
        python-version: ${{ matrix.python-version }}

    - name: test
      run: |
        pip install -U setuptools wheel pip
        pip install cruft pre-commit
        pre-commit run --all-files
        cruft create --no-input https://github.com/${{ github.repository }} servicecanary.json
        cd servicecanary
        git config --global init.defaultBranch main
        git config --global user.email "pensignals123@users.noreply.github.com"
        git config --global user.name "Pennsignals Bot"
        git init .
        git add .
        git commit -m 'Serivce canary'
        git push origin main --force
